#include <stdio.h>
#include <stdlib.h>
#include <pwm.h>
#include <pwm12.h>
#include <p30F4012.h>
#include <p30Fxxxx.h>
#include <math.h>
#include "timer.h"
#include "adc10.h"
#include <libpic30.h>

_FOSC(CSW_FSCM_OFF & FRC_PLL16);
//_FOSC(CSW_FSCM_OFF & FRC_PLL4);
_FWDT(WDT_OFF);                     // Turn off Watchdog Timer
_FBORPOR(PBOR_OFF & MCLR_EN);       // Set Brown-out Reset voltage and set Power-up Timer to 16 ms
_FGS(CODE_PROT_OFF);                // Set Code Protection Off

//#define FCY 29840000             // 30 MIPS this is the amount of processes per second
#define FCY 29575000
#define FPWM 65000             // 100 kHz switching frequency
//#define FPWM 20000             // 100 kHz switching frequency
#define _0_DEGREES 0x0000       // 0 degree phase
#define _120_DEGREES 0x5555     // 120 degree phase
#define _240_DEGREES 0xAAAA     // 240 degree phase
#define _DES_FREQ (float) 10    //target frequency
#define _DELTA_PHASE (unsigned int)(_DES_FREQ * 65536 / FPWM)
#define DEADTIME (unsigned int)(0.0000004 * FCY)     //dead time between triggers 200ns


//#define DEADTIME (unsigned int)(0.00000 * FCY)

unsigned int Phase = 0;
unsigned int Delta_Phase, check;
double Delta_Phase_real;
unsigned int Phase_Offset1, Phase_Offset2, Phase_Offset3;
unsigned int Multiplier, Result;
unsigned char RAMBuffer[256];	//RAM area which will work as EEPROM for Master I2C device
unsigned char *RAMPtr;			//Pointer to RAM memory locations
int AddrFlag = 0;	//Initlize AddFlag
int DataFlag = 0;	//Initlize DataFlag

/*const int sinetable[] = {
    0,26,51,76,101,126,151,176,202,227,252,277,302,327,352,377,403,428,453,478,503,528,553,579,604,629,654,679,704,729,754,780,805,830,855,880,905,930,955,981,1006,1031,1056,1081,1106,1131,1156,1181,1207,1232,1257,1282,1307,1332,1357,1382,1407,1433,1458,1483,1508,1533,1558,1583,1608,1633,1659,1684,1709,1734,1759,1784,1809,1834,1859,1884,1909,1935,1960,1985,2010,2035,2060,2085,2110,2135,2160,2185,2210,2236,2261,2286,2311,2336,2361,2386,2411,2436,2461,2486,2511,2536,2561,2586,2611,2637,2662,2687,2712,2737,2762,2787,2812,2837,2862,2887,2912,2937,2962,2987,3012,3037,3062,3087,3112,3137,3162,3187,3212,3237,3262,3287,3312,3337,3362,3387,3412,3437,3462,3487,3512,3537,3562,3587,3612,3637,3662,3687,3712,3737,3762,3787,3812,3837,3862,3887,3912,3937,3962,3987,4012,4036,4061,4086,4111,4136,4161,4186,4211,4236,4261,4286,4311,4336,4360,4385,4410,4435,4460,4485,4510,4535,4560,4585,4609,4634,4659,4684,4709,4734,4759,4784,4808,4833,4858,4883,4908,4933,4958,4982,5007,5032,5057,5082,5107,5131,5156,5181,5206,5231,5255,5280,5305,5330,5355,5379,5404,5429,5454,5479,5503,5528,5553,5578,5602,5627,5652,5677,5701,5726,5751,5776,5800,5825,5850,5875,5899,5924,5949,5973,5998,6023,6048,6072,6097,6122,6146,6171,6196,6220,6245,6270,6294,6319,6344,6368,6393,6418,6442,6467,6492,6516,6541,6565,6590,6615,6639,6664,6689,6713,6738,6762,6787,6812,6836,6861,6885,6910,6934,6959,6983,7008,7033,7057,7082,7106,7131,7155,7180,7204,7229,7253,7278,7302,7327,7351,7376,7400,7425,7449,7474,7498,7523,7547,7572,7596,7620,7645,7669,7694,7718,7743,7767,7791,7816,7840,7865,7889,7913,7938,7962,7987,8011,8035,8060,8084,8108,8133,8157,8181,8206,8230,8254,8279,8303,8327,8352,8376,8400,8425,8449,8473,8497,8522,8546,8570,8594,8619,8643,8667,8691,8716,8740,8764,8788,8813,8837,8861,8885,8909,8933,8958,8982,9006,9030,9054,9078,9103,9127,9151,9175,9199,9223,9247,9271,9296,9320,9344,9368,9392,9416,9440,9464,9488,9512,9536,9560,9584,9608,9632,9656,9680,9704,9728,9752,9776,9800,9824,9848,9872,9896,9920,9944,9968,9992,10016,10040,10064,10088,10112,10136,10160,10183,10207,10231,10255,10279,10303,10327,10350,10374,10398,10422,10446,10470,10493,10517,10541,10565,10589,10612,10636,10660,10684,10707,10731,10755,10779,10802,10826,10850,10874,10897,10921,10945,10968,10992,11016,11039,11063,11087,11110,11134,11158,11181,11205,11228,11252,11276,11299,11323,11346,11370,11394,11417,11441,11464,11488,11511,11535,11558,11582,11605,11629,11652,11676,11699,11723,11746,11770,11793,11817,11840,11863,11887,11910,11934,11957,11981,12004,12027,12051,12074,12097,12121,12144,12167,12191,12214,12237,12261,12284,12307,12331,12354,12377,12400,12424,12447,12470,12493,12517,12540,12563,12586,12610,12633,12656,12679,12702,12725,12749,12772,12795,12818,12841,12864,12887,12910,12934,12957,12980,13003,13026,13049,13072,13095,13118,13141,13164,13187,13210,13233,13256,13279,13302,13325,13348,13371,13394,13417,13440,13463,13486,13508,13531,13554,13577,13600,13623,13646,13668,13691,13714,13737,13760,13783,13805,13828,13851,13874,13896,13919,13942,13965,13987,14010,14033,14056,14078,14101,14124,14146,14169,14192,14214,14237,14260,14282,14305,14327,14350,14373,14395,14418,14440,14463,14485,14508,14531,14553,14576,14598,14621,14643,14666,14688,14710,14733,14755,14778,14800,14823,14845,14867,14890,14912,14935,14957,14979,15002,15024,15046,15069,15091,15113,15136,15158,15180,15202,15225,15247,15269,15291,15314,15336,15358,15380,15402,15425,15447,15469,15491,15513,15535,15557,15580,15602,15624,15646,15668,15690,15712,15734,15756,15778,15800,15822,15844,15866,15888,15910,15932,15954,15976,15998,16020,16042,16064,16086,16108,16129,16151,16173,16195,16217,16239,16261,16282,16304,16326,16348,16369,16391,16413,16435,16456,16478,16500,16522,16543,16565,16587,16608,16630,16652,16673,16695,16717,16738,16760,16781,16803,16825,16846,16868,16889,16911,16932,16954,16975,16997,17018,17040,17061,17083,17104,17125,17147,17168,17190,17211,17233,17254,17275,17297,17318,17339,17361,17382,17403,17424,17446,17467,17488,17510,17531,17552,17573,17594,17616,17637,17658,17679,17700,17721,17743,17764,17785,17806,17827,17848,17869,17890,17911,17932,17953,17974,17995,18016,18037,18058,18079,18100,18121,18142,18163,18184,18205,18226,18247,18268,18288,18309,18330,18351,18372,18393,18413,18434,18455,18476,18496,18517,18538,18559,18579,18600,18621,18641,18662,18683,18703,18724,18745,18765,18786,18806,18827,18847,18868,18889,18909,18930,18950,18971,18991,19012,19032,19052,19073,19093,19114,19134,19155,19175,19195,19216,19236,19256,19277,19297,19317,19338,19358,19378,19398,19419,19439,19459,19479,19500,19520,19540,19560,19580,19600,19621,19641,19661,19681,19701,19721,19741,19761,19781,19801,19821,19841,19861,19881,19901,19921,19941,19961,19981,20001,20021,20041,20061,20080,20100,20120,20140,20160,20180,20199,20219,20239,20259,20278,20298,20318,20338,20357,20377,20397,20416,20436,20456,20475,20495,20514,20534,20554,20573,20593,20612,20632,20651,20671,20690,20710,20729,20749,20768,20788,20807,20826,20846,20865,20885,20904,20923,20943,20962,20981,21001,21020,21039,21058,21078,21097,21116,21135,21155,21174,21193,21212,21231,21250,21269,21289,21308,21327,21346,21365,21384,21403,21422,21441,21460,21479,21498,21517,21536,21555,21574,21593,21612,21630,21649,21668,21687,21706,21725,21744,21762,21781,21800,21819,21837,21856,21875,21894,21912,21931,21950,21968,21987,22005,22024,22043,22061,22080,22098,22117,22136,22154,22173,22191,22210,22228,22246,22265,22283,22302,22320,22339,22357,22375,22394,22412,22430,22449,22467,22485,22504,22522,22540,22558,22576,22595,22613,22631,22649,22667,22686,22704,22722,22740,22758,22776,22794,22812,22830,22848,22866,22884,22902,22920,22938,22956,22974,22992,23010,23028,23046,23063,23081,23099,23117,23135,23152,23170,23188,23206,23224,23241,23259,23277,23294,23312,23330,23347,23365,23383,23400,23418,23435,23453,23470,23488,23505,23523,23540,23558,23575,23593,23610,23628,23645,23662,23680,23697,23715,23732,23749,23767,23784,23801,23818,23836,23853,23870,23887,23904,23922,23939,23956,23973,23990,24007,24024,24042,24059,24076,24093,24110,24127,24144,24161,24178,24195,24212,24229,24245,24262,24279,24296,24313,24330,24347,24363,24380,24397,24414,24431,24447,24464,24481,24497,24514,24531,24547,24564,24581,24597,24614,24631,24647,24664,24680,24697,24713,24730,24746,24763,24779,24796,24812,24828,24845,24861,24878,24894,24910,24927,24943,24959,24975,24992,25008,25024,25040,25057,25073,25089,25105,25121,25137,25153,25170,25186,25202,25218,25234,25250,25266,25282,25298,25314,25330,25346,25362,25377,25393,25409,25425,25441,25457,25473,25488,25504,25520,25536,25551,25567,25583,25599,25614,25630,25646,25661,25677,25692,25708,25724,25739,25755,25770,25786,25801,25817,25832,25848,25863,25879,25894,25909,25925,25940,25955,25971,25986,26001,26017,26032,26047,26062,26078,26093,26108,26123,26138,26154,26169,26184,26199,26214,26229,26244,26259,26274,26289,26304,26319,26334,26349,26364,26379,26394,26409,26424,26438,26453,26468,26483,26498,26513,26527,26542,26557,26571,26586,26601,26616,26630,26645,26659,26674,26689,26703,26718,26732,26747,26761,26776,26790,26805,26819,26834,26848,26862,26877,26891,26906,26920,26934,26949,26963,26977,26991,27006,27020,27034,27048,27062,27077,27091,27105,27119,27133,27147,27161,27175,27189,27203,27217,27231,27245,27259,27273,27287,27301,27315,27329,27343,27356,27370,27384,27398,27412,27425,27439,27453,27467,27480,27494,27508,27521,27535,27549,27562,27576,27589,27603,27616,27630,27643,27657,27670,27684,27697,27711,27724,27737,27751,27764,27778,27791,27804,27817,27831,27844,27857,27870,27884,27897,27910,27923,27936,27949,27963,27976,27989,28002,28015,28028,28041,28054,28067,28080,28093,28106,28119,28132,28144,28157,28170,28183,28196,28209,28221,28234,28247,28260,28272,28285,28298,28310,28323,28336,28348,28361,28373,28386,28398,28411,28424,28436,28448,28461,28473,28486,28498,28511,28523,28535,28548,28560,28572,28585,28597,28609,28621,28634,28646,28658,28670,28682,28695,28707,28719,28731,28743,28755,28767,28779,28791,28803,28815,28827,28839,28851,28863,28875,28887,28898,28910,28922,28934,28946,28957,28969,28981,28993,29004,29016,29028,29039,29051,29063,29074,29086,29097,29109,29120,29132,29143,29155,29166,29178,29189,29201,29212,29223,29235,29246,29257,29269,29280,29291,29303,29314,29325,29336,29347,29359,29370,29381,29392,29403,29414,29425,29436,29447,29458,29469,29480,29491,29502,29513,29524,29535,29546,29557,29568,29578,29589,29600,29611,29622,29632,29643,29654,29664,29675,29686,29696,29707,29718,29728,29739,29749,29760,29770,29781,29791,29802,29812,29823,29833,29843,29854,29864,29874,29885,29895,29905,29916,29926,29936,29946,29956,29967,29977,29987,29997,30007,30017,30027,30037,30047,30057,30067,30077,30087,30097,30107,30117,30127,30137,30147,30157,30166,30176,30186,30196,30206,30215,30225,30235,30244,30254,30264,30273,30283,30292,30302,30312,30321,30331,30340,30350,30359,30369,30378,30387,30397,30406,30416,30425,30434,30443,30453,30462,30471,30481,30490,30499,30508,30517,30526,30536,30545,30554,30563,30572,30581,30590,30599,30608,30617,30626,30635,30644,30653,30661,30670,30679,30688,30697,30706,30714,30723,30732,30740,30749,30758,30767,30775,30784,30792,30801,30810,30818,30827,30835,30844,30852,30861,30869,30877,30886,30894,30903,30911,30919,30928,30936,30944,30952,30961,30969,30977,30985,30993,31002,31010,31018,31026,31034,31042,31050,31058,31066,31074,31082,31090,31098,31106,31114,31122,31129,31137,31145,31153,31161,31168,31176,31184,31192,31199,31207,31215,31222,31230,31237,31245,31253,31260,31268,31275,31283,31290,31298,31305,31312,31320,31327,31335,31342,31349,31357,31364,31371,31378,31386,31393,31400,31407,31414,31421,31429,31436,31443,31450,31457,31464,31471,31478,31485,31492,31499,31506,31513,31519,31526,31533,31540,31547,31554,31560,31567,31574,31581,31587,31594,31601,31607,31614,31620,31627,31634,31640,31647,31653,31660,31666,31673,31679,31685,31692,31698,31705,31711,31717,31724,31730,31736,31742,31749,31755,31761,31767,31773,31779,31786,31792,31798,31804,31810,31816,31822,31828,31834,31840,31846,31852,31857,31863,31869,31875,31881,31887,31892,31898,31904,31910,31915,31921,31927,31932,31938,31944,31949,31955,31960,31966,31971,31977,31982,31988,31993,31999,32004,32009,32015,32020,32025,32031,32036,32041,32047,32052,32057,32062,32067,32073,32078,32083,32088,32093,32098,32103,32108,32113,32118,32123,32128,32133,32138,32143,32148,32153,32157,32162,32167,32172,32177,32181,32186,32191,32195,32200,32205,32209,32214,32219,32223,32228,32232,32237,32241,32246,32250,32255,32259,32263,32268,32272,32276,32281,32285,32289,32294,32298,32302,32306,32311,32315,32319,32323,32327,32331,32335,32339,32343,32347,32351,32355,32359,32363,32367,32371,32375,32379,32383,32387,32390,32394,32398,32402,32405,32409,32413,32417,32420,32424,32427,32431,32435,32438,32442,32445,32449,32452,32456,32459,32463,32466,32469,32473,32476,32479,32483,32486,32489,32493,32496,32499,32502,32505,32509,32512,32515,32518,32521,32524,32527,32530,32533,32536,32539,32542,32545,32548,32551,32554,32557,32559,32562,32565,32568,32571,32573,32576,32579,32581,32584,32587,32589,32592,32595,32597,32600,32602,32605,32607,32610,32612,32615,32617,32619,32622,32624,32626,32629,32631,32633,32636,32638,32640,32642,32645,32647,32649,32651,32653,32655,32657,32659,32661,32663,32665,32667,32669,32671,32673,32675,32677,32679,32681,32682,32684,32686,32688,32689,32691,32693,32695,32696,32698,32700,32701,32703,32704,32706,32707,32709,32710,32712,32713,32715,32716,32718,32719,32720,32722,32723,32724,32726,32727,32728,32729,32730,32732,32733,32734,32735,32736,32737,32738,32739,32740,32741,32742,32743,32744,32745,32746,32747,32748,32749,32750,32751,32751,32752,32753,32754,32754,32755,32756,32756,32757,32758,32758,32759,32759,32760,32760,32761,32761,32762,32762,32763,32763,32764,32764,32764,32765,32765,32765,32766,32766,32766,32766,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32766,32766,32766,32766,32765,32765,32765,32764,32764,32764,32763,32763,32762,32762,32761,32761,32760,32760,32759,32759,32758,32758,32757,32756,32756,32755,32754,32754,32753,32752,32751,32751,32750,32749,32748,32747,32746,32745,32744,32743,32742,32741,32740,32739,32738,32737,32736,32735,32734,32733,32732,32730,32729,32728,32727,32726,32724,32723,32722,32720,32719,32718,32716,32715,32713,32712,32710,32709,32707,32706,32704,32703,32701,32700,32698,32696,32695,32693,32691,32689,32688,32686,32684,32682,32681,32679,32677,32675,32673,32671,32669,32667,32665,32663,32661,32659,32657,32655,32653,32651,32649,32647,32645,32642,32640,32638,32636,32633,32631,32629,32626,32624,32622,32619,32617,32615,32612,32610,32607,32605,32602,32600,32597,32595,32592,32589,32587,32584,32581,32579,32576,32573,32571,32568,32565,32562,32559,32557,32554,32551,32548,32545,32542,32539,32536,32533,32530,32527,32524,32521,32518,32515,32512,32509,32505,32502,32499,32496,32493,32489,32486,32483,32479,32476,32473,32469,32466,32463,32459,32456,32452,32449,32445,32442,32438,32435,32431,32427,32424,32420,32417,32413,32409,32405,32402,32398,32394,32390,32387,32383,32379,32375,32371,32367,32363,32359,32355,32351,32347,32343,32339,32335,32331,32327,32323,32319,32315,32311,32306,32302,32298,32294,32289,32285,32281,32276,32272,32268,32263,32259,32255,32250,32246,32241,32237,32232,32228,32223,32219,32214,32209,32205,32200,32195,32191,32186,32181,32177,32172,32167,32162,32157,32153,32148,32143,32138,32133,32128,32123,32118,32113,32108,32103,32098,32093,32088,32083,32078,32073,32067,32062,32057,32052,32047,32041,32036,32031,32025,32020,32015,32009,32004,31999,31993,31988,31982,31977,31971,31966,31960,31955,31949,31944,31938,31932,31927,31921,31915,31910,31904,31898,31892,31887,31881,31875,31869,31863,31857,31852,31846,31840,31834,31828,31822,31816,31810,31804,31798,31792,31786,31779,31773,31767,31761,31755,31749,31742,31736,31730,31724,31717,31711,31705,31698,31692,31685,31679,31673,31666,31660,31653,31647,31640,31634,31627,31620,31614,31607,31601,31594,31587,31581,31574,31567,31560,31554,31547,31540,31533,31526,31519,31513,31506,31499,31492,31485,31478,31471,31464,31457,31450,31443,31436,31429,31421,31414,31407,31400,31393,31386,31378,31371,31364,31357,31349,31342,31335,31327,31320,31312,31305,31298,31290,31283,31275,31268,31260,31253,31245,31237,31230,31222,31215,31207,31199,31192,31184,31176,31168,31161,31153,31145,31137,31129,31122,31114,31106,31098,31090,31082,31074,31066,31058,31050,31042,31034,31026,31018,31010,31002,30993,30985,30977,30969,30961,30952,30944,30936,30928,30919,30911,30903,30894,30886,30877,30869,30861,30852,30844,30835,30827,30818,30810,30801,30792,30784,30775,30767,30758,30749,30740,30732,30723,30714,30706,30697,30688,30679,30670,30661,30653,30644,30635,30626,30617,30608,30599,30590,30581,30572,30563,30554,30545,30536,30526,30517,30508,30499,30490,30481,30471,30462,30453,30443,30434,30425,30416,30406,30397,30387,30378,30369,30359,30350,30340,30331,30321,30312,30302,30292,30283,30273,30264,30254,30244,30235,30225,30215,30206,30196,30186,30176,30166,30157,30147,30137,30127,30117,30107,30097,30087,30077,30067,30057,30047,30037,30027,30017,30007,29997,29987,29977,29967,29956,29946,29936,29926,29916,29905,29895,29885,29874,29864,29854,29843,29833,29823,29812,29802,29791,29781,29770,29760,29749,29739,29728,29718,29707,29696,29686,29675,29664,29654,29643,29632,29622,29611,29600,29589,29578,29568,29557,29546,29535,29524,29513,29502,29491,29480,29469,29458,29447,29436,29425,29414,29403,29392,29381,29370,29359,29347,29336,29325,29314,29303,29291,29280,29269,29257,29246,29235,29223,29212,29201,29189,29178,29166,29155,29143,29132,29120,29109,29097,29086,29074,29063,29051,29039,29028,29016,29004,28993,28981,28969,28957,28946,28934,28922,28910,28898,28887,28875,28863,28851,28839,28827,28815,28803,28791,28779,28767,28755,28743,28731,28719,28707,28695,28682,28670,28658,28646,28634,28621,28609,28597,28585,28572,28560,28548,28535,28523,28511,28498,28486,28473,28461,28448,28436,28424,28411,28398,28386,28373,28361,28348,28336,28323,28310,28298,28285,28272,28260,28247,28234,28221,28209,28196,28183,28170,28157,28144,28132,28119,28106,28093,28080,28067,28054,28041,28028,28015,28002,27989,27976,27963,27949,27936,27923,27910,27897,27884,27870,27857,27844,27831,27817,27804,27791,27778,27764,27751,27737,27724,27711,27697,27684,27670,27657,27643,27630,27616,27603,27589,27576,27562,27549,27535,27521,27508,27494,27480,27467,27453,27439,27425,27412,27398,27384,27370,27356,27343,27329,27315,27301,27287,27273,27259,27245,27231,27217,27203,27189,27175,27161,27147,27133,27119,27105,27091,27077,27062,27048,27034,27020,27006,26991,26977,26963,26949,26934,26920,26906,26891,26877,26862,26848,26834,26819,26805,26790,26776,26761,26747,26732,26718,26703,26689,26674,26659,26645,26630,26616,26601,26586,26571,26557,26542,26527,26513,26498,26483,26468,26453,26438,26424,26409,26394,26379,26364,26349,26334,26319,26304,26289,26274,26259,26244,26229,26214,26199,26184,26169,26154,26138,26123,26108,26093,26078,26062,26047,26032,26017,26001,25986,25971,25955,25940,25925,25909,25894,25879,25863,25848,25832,25817,25801,25786,25770,25755,25739,25724,25708,25692,25677,25661,25646,25630,25614,25599,25583,25567,25551,25536,25520,25504,25488,25473,25457,25441,25425,25409,25393,25377,25362,25346,25330,25314,25298,25282,25266,25250,25234,25218,25202,25186,25170,25153,25137,25121,25105,25089,25073,25057,25040,25024,25008,24992,24975,24959,24943,24927,24910,24894,24878,24861,24845,24828,24812,24796,24779,24763,24746,24730,24713,24697,24680,24664,24647,24631,24614,24597,24581,24564,24547,24531,24514,24497,24481,24464,24447,24431,24414,24397,24380,24363,24347,24330,24313,24296,24279,24262,24245,24229,24212,24195,24178,24161,24144,24127,24110,24093,24076,24059,24042,24024,24007,23990,23973,23956,23939,23922,23904,23887,23870,23853,23836,23818,23801,23784,23767,23749,23732,23715,23697,23680,23662,23645,23628,23610,23593,23575,23558,23540,23523,23505,23488,23470,23453,23435,23418,23400,23383,23365,23347,23330,23312,23294,23277,23259,23241,23224,23206,23188,23170,23152,23135,23117,23099,23081,23063,23046,23028,23010,22992,22974,22956,22938,22920,22902,22884,22866,22848,22830,22812,22794,22776,22758,22740,22722,22704,22686,22667,22649,22631,22613,22595,22576,22558,22540,22522,22504,22485,22467,22449,22430,22412,22394,22375,22357,22339,22320,22302,22283,22265,22246,22228,22210,22191,22173,22154,22136,22117,22098,22080,22061,22043,22024,22005,21987,21968,21950,21931,21912,21894,21875,21856,21837,21819,21800,21781,21762,21744,21725,21706,21687,21668,21649,21630,21612,21593,21574,21555,21536,21517,21498,21479,21460,21441,21422,21403,21384,21365,21346,21327,21308,21289,21269,21250,21231,21212,21193,21174,21155,21135,21116,21097,21078,21058,21039,21020,21001,20981,20962,20943,20923,20904,20885,20865,20846,20826,20807,20788,20768,20749,20729,20710,20690,20671,20651,20632,20612,20593,20573,20554,20534,20514,20495,20475,20456,20436,20416,20397,20377,20357,20338,20318,20298,20278,20259,20239,20219,20199,20180,20160,20140,20120,20100,20080,20061,20041,20021,20001,19981,19961,19941,19921,19901,19881,19861,19841,19821,19801,19781,19761,19741,19721,19701,19681,19661,19641,19621,19600,19580,19560,19540,19520,19500,19479,19459,19439,19419,19398,19378,19358,19338,19317,19297,19277,19256,19236,19216,19195,19175,19155,19134,19114,19093,19073,19052,19032,19012,18991,18971,18950,18930,18909,18889,18868,18847,18827,18806,18786,18765,18745,18724,18703,18683,18662,18641,18621,18600,18579,18559,18538,18517,18496,18476,18455,18434,18413,18393,18372,18351,18330,18309,18288,18268,18247,18226,18205,18184,18163,18142,18121,18100,18079,18058,18037,18016,17995,17974,17953,17932,17911,17890,17869,17848,17827,17806,17785,17764,17743,17721,17700,17679,17658,17637,17616,17594,17573,17552,17531,17510,17488,17467,17446,17424,17403,17382,17361,17339,17318,17297,17275,17254,17233,17211,17190,17168,17147,17125,17104,17083,17061,17040,17018,16997,16975,16954,16932,16911,16889,16868,16846,16825,16803,16781,16760,16738,16717,16695,16673,16652,16630,16608,16587,16565,16543,16522,16500,16478,16456,16435,16413,16391,16369,16348,16326,16304,16282,16261,16239,16217,16195,16173,16151,16129,16108,16086,16064,16042,16020,15998,15976,15954,15932,15910,15888,15866,15844,15822,15800,15778,15756,15734,15712,15690,15668,15646,15624,15602,15580,15557,15535,15513,15491,15469,15447,15425,15402,15380,15358,15336,15314,15291,15269,15247,15225,15202,15180,15158,15136,15113,15091,15069,15046,15024,15002,14979,14957,14935,14912,14890,14867,14845,14823,14800,14778,14755,14733,14710,14688,14666,14643,14621,14598,14576,14553,14531,14508,14485,14463,14440,14418,14395,14373,14350,14327,14305,14282,14260,14237,14214,14192,14169,14146,14124,14101,14078,14056,14033,14010,13987,13965,13942,13919,13896,13874,13851,13828,13805,13783,13760,13737,13714,13691,13668,13646,13623,13600,13577,13554,13531,13508,13486,13463,13440,13417,13394,13371,13348,13325,13302,13279,13256,13233,13210,13187,13164,13141,13118,13095,13072,13049,13026,13003,12980,12957,12934,12910,12887,12864,12841,12818,12795,12772,12749,12725,12702,12679,12656,12633,12610,12586,12563,12540,12517,12493,12470,12447,12424,12400,12377,12354,12331,12307,12284,12261,12237,12214,12191,12167,12144,12121,12097,12074,12051,12027,12004,11981,11957,11934,11910,11887,11863,11840,11817,11793,11770,11746,11723,11699,11676,11652,11629,11605,11582,11558,11535,11511,11488,11464,11441,11417,11394,11370,11346,11323,11299,11276,11252,11228,11205,11181,11158,11134,11110,11087,11063,11039,11016,10992,10968,10945,10921,10897,10874,10850,10826,10802,10779,10755,10731,10707,10684,10660,10636,10612,10589,10565,10541,10517,10493,10470,10446,10422,10398,10374,10350,10327,10303,10279,10255,10231,10207,10183,10160,10136,10112,10088,10064,10040,10016,9992,9968,9944,9920,9896,9872,9848,9824,9800,9776,9752,9728,9704,9680,9656,9632,9608,9584,9560,9536,9512,9488,9464,9440,9416,9392,9368,9344,9320,9296,9271,9247,9223,9199,9175,9151,9127,9103,9078,9054,9030,9006,8982,8958,8933,8909,8885,8861,8837,8813,8788,8764,8740,8716,8691,8667,8643,8619,8594,8570,8546,8522,8497,8473,8449,8425,8400,8376,8352,8327,8303,8279,8254,8230,8206,8181,8157,8133,8108,8084,8060,8035,8011,7987,7962,7938,7913,7889,7865,7840,7816,7791,7767,7743,7718,7694,7669,7645,7620,7596,7572,7547,7523,7498,7474,7449,7425,7400,7376,7351,7327,7302,7278,7253,7229,7204,7180,7155,7131,7106,7082,7057,7033,7008,6983,6959,6934,6910,6885,6861,6836,6812,6787,6762,6738,6713,6689,6664,6639,6615,6590,6565,6541,6516,6492,6467,6442,6418,6393,6368,6344,6319,6294,6270,6245,6220,6196,6171,6146,6122,6097,6072,6048,6023,5998,5973,5949,5924,5899,5875,5850,5825,5800,5776,5751,5726,5701,5677,5652,5627,5602,5578,5553,5528,5503,5479,5454,5429,5404,5379,5355,5330,5305,5280,5255,5231,5206,5181,5156,5131,5107,5082,5057,5032,5007,4982,4958,4933,4908,4883,4858,4833,4808,4784,4759,4734,4709,4684,4659,4634,4609,4585,4560,4535,4510,4485,4460,4435,4410,4385,4360,4336,4311,4286,4261,4236,4211,4186,4161,4136,4111,4086,4061,4036,4012,3987,3962,3937,3912,3887,3862,3837,3812,3787,3762,3737,3712,3687,3662,3637,3612,3587,3562,3537,3512,3487,3462,3437,3412,3387,3362,3337,3312,3287,3262,3237,3212,3187,3162,3137,3112,3087,3062,3037,3012,2987,2962,2937,2912,2887,2862,2837,2812,2787,2762,2737,2712,2687,2662,2637,2611,2586,2561,2536,2511,2486,2461,2436,2411,2386,2361,2336,2311,2286,2261,2236,2210,2185,2160,2135,2110,2085,2060,2035,2010,1985,1960,1935,1909,1884,1859,1834,1809,1784,1759,1734,1709,1684,1659,1633,1608,1583,1558,1533,1508,1483,1458,1433,1407,1382,1357,1332,1307,1282,1257,1232,1207,1181,1156,1131,1106,1081,1056,1031,1006,981,955,930,905,880,855,830,805,780,754,729,704,679,654,629,604,579,553,528,503,478,453,428,403,377,352,327,302,277,252,227,202,176,151,126,101,76,51,26,1,-25,-50,-75,-100,-125,-150,-175,-201,-226,-251,-276,-301,-326,-351,-376,-402,-427,-452,-477,-502,-527,-552,-578,-603,-628,-653,-678,-703,-728,-753,-779,-804,-829,-854,-879,-904,-929,-954,-980,-1005,-1030,-1055,-1080,-1105,-1130,-1155,-1180,-1206,-1231,-1256,-1281,-1306,-1331,-1356,-1381,-1406,-1432,-1457,-1482,-1507,-1532,-1557,-1582,-1607,-1632,-1658,-1683,-1708,-1733,-1758,-1783,-1808,-1833,-1858,-1883,-1908,-1934,-1959,-1984,-2009,-2034,-2059,-2084,-2109,-2134,-2159,-2184,-2209,-2235,-2260,-2285,-2310,-2335,-2360,-2385,-2410,-2435,-2460,-2485,-2510,-2535,-2560,-2585,-2610,-2636,-2661,-2686,-2711,-2736,-2761,-2786,-2811,-2836,-2861,-2886,-2911,-2936,-2961,-2986,-3011,-3036,-3061,-3086,-3111,-3136,-3161,-3186,-3211,-3236,-3261,-3286,-3311,-3336,-3361,-3386,-3411,-3436,-3461,-3486,-3511,-3536,-3561,-3586,-3611,-3636,-3661,-3686,-3711,-3736,-3761,-3786,-3811,-3836,-3861,-3886,-3911,-3936,-3961,-3986,-4011,-4035,-4060,-4085,-4110,-4135,-4160,-4185,-4210,-4235,-4260,-4285,-4310,-4335,-4359,-4384,-4409,-4434,-4459,-4484,-4509,-4534,-4559,-4584,-4608,-4633,-4658,-4683,-4708,-4733,-4758,-4783,-4807,-4832,-4857,-4882,-4907,-4932,-4957,-4981,-5006,-5031,-5056,-5081,-5106,-5130,-5155,-5180,-5205,-5230,-5254,-5279,-5304,-5329,-5354,-5378,-5403,-5428,-5453,-5478,-5502,-5527,-5552,-5577,-5601,-5626,-5651,-5676,-5700,-5725,-5750,-5775,-5799,-5824,-5849,-5874,-5898,-5923,-5948,-5972,-5997,-6022,-6047,-6071,-6096,-6121,-6145,-6170,-6195,-6219,-6244,-6269,-6293,-6318,-6343,-6367,-6392,-6417,-6441,-6466,-6491,-6515,-6540,-6564,-6589,-6614,-6638,-6663,-6688,-6712,-6737,-6761,-6786,-6811,-6835,-6860,-6884,-6909,-6933,-6958,-6982,-7007,-7032,-7056,-7081,-7105,-7130,-7154,-7179,-7203,-7228,-7252,-7277,-7301,-7326,-7350,-7375,-7399,-7424,-7448,-7473,-7497,-7522,-7546,-7571,-7595,-7619,-7644,-7668,-7693,-7717,-7742,-7766,-7790,-7815,-7839,-7864,-7888,-7912,-7937,-7961,-7986,-8010,-8034,-8059,-8083,-8107,-8132,-8156,-8180,-8205,-8229,-8253,-8278,-8302,-8326,-8351,-8375,-8399,-8424,-8448,-8472,-8496,-8521,-8545,-8569,-8593,-8618,-8642,-8666,-8690,-8715,-8739,-8763,-8787,-8812,-8836,-8860,-8884,-8908,-8932,-8957,-8981,-9005,-9029,-9053,-9077,-9102,-9126,-9150,-9174,-9198,-9222,-9246,-9270,-9295,-9319,-9343,-9367,-9391,-9415,-9439,-9463,-9487,-9511,-9535,-9559,-9583,-9607,-9631,-9655,-9679,-9703,-9727,-9751,-9775,-9799,-9823,-9847,-9871,-9895,-9919,-9943,-9967,-9991,-10015,-10039,-10063,-10087,-10111,-10135,-10159,-10182,-10206,-10230,-10254,-10278,-10302,-10326,-10349,-10373,-10397,-10421,-10445,-10469,-10492,-10516,-10540,-10564,-10588,-10611,-10635,-10659,-10683,-10706,-10730,-10754,-10778,-10801,-10825,-10849,-10873,-10896,-10920,-10944,-10967,-10991,-11015,-11038,-11062,-11086,-11109,-11133,-11157,-11180,-11204,-11227,-11251,-11275,-11298,-11322,-11345,-11369,-11393,-11416,-11440,-11463,-11487,-11510,-11534,-11557,-11581,-11604,-11628,-11651,-11675,-11698,-11722,-11745,-11769,-11792,-11816,-11839,-11862,-11886,-11909,-11933,-11956,-11980,-12003,-12026,-12050,-12073,-12096,-12120,-12143,-12166,-12190,-12213,-12236,-12260,-12283,-12306,-12330,-12353,-12376,-12399,-12423,-12446,-12469,-12492,-12516,-12539,-12562,-12585,-12609,-12632,-12655,-12678,-12701,-12724,-12748,-12771,-12794,-12817,-12840,-12863,-12886,-12909,-12933,-12956,-12979,-13002,-13025,-13048,-13071,-13094,-13117,-13140,-13163,-13186,-13209,-13232,-13255,-13278,-13301,-13324,-13347,-13370,-13393,-13416,-13439,-13462,-13485,-13507,-13530,-13553,-13576,-13599,-13622,-13645,-13667,-13690,-13713,-13736,-13759,-13782,-13804,-13827,-13850,-13873,-13895,-13918,-13941,-13964,-13986,-14009,-14032,-14055,-14077,-14100,-14123,-14145,-14168,-14191,-14213,-14236,-14259,-14281,-14304,-14326,-14349,-14372,-14394,-14417,-14439,-14462,-14484,-14507,-14530,-14552,-14575,-14597,-14620,-14642,-14665,-14687,-14709,-14732,-14754,-14777,-14799,-14822,-14844,-14866,-14889,-14911,-14934,-14956,-14978,-15001,-15023,-15045,-15068,-15090,-15112,-15135,-15157,-15179,-15201,-15224,-15246,-15268,-15290,-15313,-15335,-15357,-15379,-15401,-15424,-15446,-15468,-15490,-15512,-15534,-15556,-15579,-15601,-15623,-15645,-15667,-15689,-15711,-15733,-15755,-15777,-15799,-15821,-15843,-15865,-15887,-15909,-15931,-15953,-15975,-15997,-16019,-16041,-16063,-16085,-16107,-16128,-16150,-16172,-16194,-16216,-16238,-16260,-16281,-16303,-16325,-16347,-16368,-16390,-16412,-16434,-16455,-16477,-16499,-16521,-16542,-16564,-16586,-16607,-16629,-16651,-16672,-16694,-16716,-16737,-16759,-16780,-16802,-16824,-16845,-16867,-16888,-16910,-16931,-16953,-16974,-16996,-17017,-17039,-17060,-17082,-17103,-17124,-17146,-17167,-17189,-17210,-17232,-17253,-17274,-17296,-17317,-17338,-17360,-17381,-17402,-17423,-17445,-17466,-17487,-17509,-17530,-17551,-17572,-17593,-17615,-17636,-17657,-17678,-17699,-17720,-17742,-17763,-17784,-17805,-17826,-17847,-17868,-17889,-17910,-17931,-17952,-17973,-17994,-18015,-18036,-18057,-18078,-18099,-18120,-18141,-18162,-18183,-18204,-18225,-18246,-18267,-18287,-18308,-18329,-18350,-18371,-18392,-18412,-18433,-18454,-18475,-18495,-18516,-18537,-18558,-18578,-18599,-18620,-18640,-18661,-18682,-18702,-18723,-18744,-18764,-18785,-18805,-18826,-18846,-18867,-18888,-18908,-18929,-18949,-18970,-18990,-19011,-19031,-19051,-19072,-19092,-19113,-19133,-19154,-19174,-19194,-19215,-19235,-19255,-19276,-19296,-19316,-19337,-19357,-19377,-19397,-19418,-19438,-19458,-19478,-19499,-19519,-19539,-19559,-19579,-19599,-19620,-19640,-19660,-19680,-19700,-19720,-19740,-19760,-19780,-19800,-19820,-19840,-19860,-19880,-19900,-19920,-19940,-19960,-19980,-20000,-20020,-20040,-20060,-20079,-20099,-20119,-20139,-20159,-20179,-20198,-20218,-20238,-20258,-20277,-20297,-20317,-20337,-20356,-20376,-20396,-20415,-20435,-20455,-20474,-20494,-20513,-20533,-20553,-20572,-20592,-20611,-20631,-20650,-20670,-20689,-20709,-20728,-20748,-20767,-20787,-20806,-20825,-20845,-20864,-20884,-20903,-20922,-20942,-20961,-20980,-21000,-21019,-21038,-21057,-21077,-21096,-21115,-21134,-21154,-21173,-21192,-21211,-21230,-21249,-21268,-21288,-21307,-21326,-21345,-21364,-21383,-21402,-21421,-21440,-21459,-21478,-21497,-21516,-21535,-21554,-21573,-21592,-21611,-21629,-21648,-21667,-21686,-21705,-21724,-21743,-21761,-21780,-21799,-21818,-21836,-21855,-21874,-21893,-21911,-21930,-21949,-21967,-21986,-22004,-22023,-22042,-22060,-22079,-22097,-22116,-22135,-22153,-22172,-22190,-22209,-22227,-22245,-22264,-22282,-22301,-22319,-22338,-22356,-22374,-22393,-22411,-22429,-22448,-22466,-22484,-22503,-22521,-22539,-22557,-22575,-22594,-22612,-22630,-22648,-22666,-22685,-22703,-22721,-22739,-22757,-22775,-22793,-22811,-22829,-22847,-22865,-22883,-22901,-22919,-22937,-22955,-22973,-22991,-23009,-23027,-23045,-23062,-23080,-23098,-23116,-23134,-23151,-23169,-23187,-23205,-23223,-23240,-23258,-23276,-23293,-23311,-23329,-23346,-23364,-23382,-23399,-23417,-23434,-23452,-23469,-23487,-23504,-23522,-23539,-23557,-23574,-23592,-23609,-23627,-23644,-23661,-23679,-23696,-23714,-23731,-23748,-23766,-23783,-23800,-23817,-23835,-23852,-23869,-23886,-23903,-23921,-23938,-23955,-23972,-23989,-24006,-24023,-24041,-24058,-24075,-24092,-24109,-24126,-24143,-24160,-24177,-24194,-24211,-24228,-24244,-24261,-24278,-24295,-24312,-24329,-24346,-24362,-24379,-24396,-24413,-24430,-24446,-24463,-24480,-24496,-24513,-24530,-24546,-24563,-24580,-24596,-24613,-24630,-24646,-24663,-24679,-24696,-24712,-24729,-24745,-24762,-24778,-24795,-24811,-24827,-24844,-24860,-24877,-24893,-24909,-24926,-24942,-24958,-24974,-24991,-25007,-25023,-25039,-25056,-25072,-25088,-25104,-25120,-25136,-25152,-25169,-25185,-25201,-25217,-25233,-25249,-25265,-25281,-25297,-25313,-25329,-25345,-25361,-25376,-25392,-25408,-25424,-25440,-25456,-25472,-25487,-25503,-25519,-25535,-25550,-25566,-25582,-25598,-25613,-25629,-25645,-25660,-25676,-25691,-25707,-25723,-25738,-25754,-25769,-25785,-25800,-25816,-25831,-25847,-25862,-25878,-25893,-25908,-25924,-25939,-25954,-25970,-25985,-26000,-26016,-26031,-26046,-26061,-26077,-26092,-26107,-26122,-26137,-26153,-26168,-26183,-26198,-26213,-26228,-26243,-26258,-26273,-26288,-26303,-26318,-26333,-26348,-26363,-26378,-26393,-26408,-26423,-26437,-26452,-26467,-26482,-26497,-26512,-26526,-26541,-26556,-26570,-26585,-26600,-26615,-26629,-26644,-26658,-26673,-26688,-26702,-26717,-26731,-26746,-26760,-26775,-26789,-26804,-26818,-26833,-26847,-26861,-26876,-26890,-26905,-26919,-26933,-26948,-26962,-26976,-26990,-27005,-27019,-27033,-27047,-27061,-27076,-27090,-27104,-27118,-27132,-27146,-27160,-27174,-27188,-27202,-27216,-27230,-27244,-27258,-27272,-27286,-27300,-27314,-27328,-27342,-27355,-27369,-27383,-27397,-27411,-27424,-27438,-27452,-27466,-27479,-27493,-27507,-27520,-27534,-27548,-27561,-27575,-27588,-27602,-27615,-27629,-27642,-27656,-27669,-27683,-27696,-27710,-27723,-27736,-27750,-27763,-27777,-27790,-27803,-27816,-27830,-27843,-27856,-27869,-27883,-27896,-27909,-27922,-27935,-27948,-27962,-27975,-27988,-28001,-28014,-28027,-28040,-28053,-28066,-28079,-28092,-28105,-28118,-28131,-28143,-28156,-28169,-28182,-28195,-28208,-28220,-28233,-28246,-28259,-28271,-28284,-28297,-28309,-28322,-28335,-28347,-28360,-28372,-28385,-28397,-28410,-28423,-28435,-28447,-28460,-28472,-28485,-28497,-28510,-28522,-28534,-28547,-28559,-28571,-28584,-28596,-28608,-28620,-28633,-28645,-28657,-28669,-28681,-28694,-28706,-28718,-28730,-28742,-28754,-28766,-28778,-28790,-28802,-28814,-28826,-28838,-28850,-28862,-28874,-28886,-28897,-28909,-28921,-28933,-28945,-28956,-28968,-28980,-28992,-29003,-29015,-29027,-29038,-29050,-29062,-29073,-29085,-29096,-29108,-29119,-29131,-29142,-29154,-29165,-29177,-29188,-29200,-29211,-29222,-29234,-29245,-29256,-29268,-29279,-29290,-29302,-29313,-29324,-29335,-29346,-29358,-29369,-29380,-29391,-29402,-29413,-29424,-29435,-29446,-29457,-29468,-29479,-29490,-29501,-29512,-29523,-29534,-29545,-29556,-29567,-29577,-29588,-29599,-29610,-29621,-29631,-29642,-29653,-29663,-29674,-29685,-29695,-29706,-29717,-29727,-29738,-29748,-29759,-29769,-29780,-29790,-29801,-29811,-29822,-29832,-29842,-29853,-29863,-29873,-29884,-29894,-29904,-29915,-29925,-29935,-29945,-29955,-29966,-29976,-29986,-29996,-30006,-30016,-30026,-30036,-30046,-30056,-30066,-30076,-30086,-30096,-30106,-30116,-30126,-30136,-30146,-30156,-30165,-30175,-30185,-30195,-30205,-30214,-30224,-30234,-30243,-30253,-30263,-30272,-30282,-30291,-30301,-30311,-30320,-30330,-30339,-30349,-30358,-30368,-30377,-30386,-30396,-30405,-30415,-30424,-30433,-30442,-30452,-30461,-30470,-30480,-30489,-30498,-30507,-30516,-30525,-30535,-30544,-30553,-30562,-30571,-30580,-30589,-30598,-30607,-30616,-30625,-30634,-30643,-30652,-30660,-30669,-30678,-30687,-30696,-30705,-30713,-30722,-30731,-30739,-30748,-30757,-30766,-30774,-30783,-30791,-30800,-30809,-30817,-30826,-30834,-30843,-30851,-30860,-30868,-30876,-30885,-30893,-30902,-30910,-30918,-30927,-30935,-30943,-30951,-30960,-30968,-30976,-30984,-30992,-31001,-31009,-31017,-31025,-31033,-31041,-31049,-31057,-31065,-31073,-31081,-31089,-31097,-31105,-31113,-31121,-31128,-31136,-31144,-31152,-31160,-31167,-31175,-31183,-31191,-31198,-31206,-31214,-31221,-31229,-31236,-31244,-31252,-31259,-31267,-31274,-31282,-31289,-31297,-31304,-31311,-31319,-31326,-31334,-31341,-31348,-31356,-31363,-31370,-31377,-31385,-31392,-31399,-31406,-31413,-31420,-31428,-31435,-31442,-31449,-31456,-31463,-31470,-31477,-31484,-31491,-31498,-31505,-31512,-31518,-31525,-31532,-31539,-31546,-31553,-31559,-31566,-31573,-31580,-31586,-31593,-31600,-31606,-31613,-31619,-31626,-31633,-31639,-31646,-31652,-31659,-31665,-31672,-31678,-31684,-31691,-31697,-31704,-31710,-31716,-31723,-31729,-31735,-31741,-31748,-31754,-31760,-31766,-31772,-31778,-31785,-31791,-31797,-31803,-31809,-31815,-31821,-31827,-31833,-31839,-31845,-31851,-31856,-31862,-31868,-31874,-31880,-31886,-31891,-31897,-31903,-31909,-31914,-31920,-31926,-31931,-31937,-31943,-31948,-31954,-31959,-31965,-31970,-31976,-31981,-31987,-31992,-31998,-32003,-32008,-32014,-32019,-32024,-32030,-32035,-32040,-32046,-32051,-32056,-32061,-32066,-32072,-32077,-32082,-32087,-32092,-32097,-32102,-32107,-32112,-32117,-32122,-32127,-32132,-32137,-32142,-32147,-32152,-32156,-32161,-32166,-32171,-32176,-32180,-32185,-32190,-32194,-32199,-32204,-32208,-32213,-32218,-32222,-32227,-32231,-32236,-32240,-32245,-32249,-32254,-32258,-32262,-32267,-32271,-32275,-32280,-32284,-32288,-32293,-32297,-32301,-32305,-32310,-32314,-32318,-32322,-32326,-32330,-32334,-32338,-32342,-32346,-32350,-32354,-32358,-32362,-32366,-32370,-32374,-32378,-32382,-32386,-32389,-32393,-32397,-32401,-32404,-32408,-32412,-32416,-32419,-32423,-32426,-32430,-32434,-32437,-32441,-32444,-32448,-32451,-32455,-32458,-32462,-32465,-32468,-32472,-32475,-32478,-32482,-32485,-32488,-32492,-32495,-32498,-32501,-32504,-32508,-32511,-32514,-32517,-32520,-32523,-32526,-32529,-32532,-32535,-32538,-32541,-32544,-32547,-32550,-32553,-32556,-32558,-32561,-32564,-32567,-32570,-32572,-32575,-32578,-32580,-32583,-32586,-32588,-32591,-32594,-32596,-32599,-32601,-32604,-32606,-32609,-32611,-32614,-32616,-32618,-32621,-32623,-32625,-32628,-32630,-32632,-32635,-32637,-32639,-32641,-32644,-32646,-32648,-32650,-32652,-32654,-32656,-32658,-32660,-32662,-32664,-32666,-32668,-32670,-32672,-32674,-32676,-32678,-32680,-32681,-32683,-32685,-32687,-32688,-32690,-32692,-32694,-32695,-32697,-32699,-32700,-32702,-32703,-32705,-32706,-32708,-32709,-32711,-32712,-32714,-32715,-32717,-32718,-32719,-32721,-32722,-32723,-32725,-32726,-32727,-32728,-32729,-32731,-32732,-32733,-32734,-32735,-32736,-32737,-32738,-32739,-32740,-32741,-32742,-32743,-32744,-32745,-32746,-32747,-32748,-32749,-32750,-32750,-32751,-32752,-32753,-32753,-32754,-32755,-32755,-32756,-32757,-32757,-32758,-32758,-32759,-32759,-32760,-32760,-32761,-32761,-32762,-32762,-32763,-32763,-32763,-32764,-32764,-32764,-32765,-32765,-32765,-32765,-32766,-32766,-32766,-32766,-32766,-32766,-32766,-32766,-32766,-32766,-32767,-32766,-32766,-32766,-32766,-32766,-32766,-32766,-32766,-32766,-32766,-32765,-32765,-32765,-32765,-32764,-32764,-32764,-32763,-32763,-32763,-32762,-32762,-32761,-32761,-32760,-32760,-32759,-32759,-32758,-32758,-32757,-32757,-32756,-32755,-32755,-32754,-32753,-32753,-32752,-32751,-32750,-32750,-32749,-32748,-32747,-32746,-32745,-32744,-32743,-32742,-32741,-32740,-32739,-32738,-32737,-32736,-32735,-32734,-32733,-32732,-32731,-32729,-32728,-32727,-32726,-32725,-32723,-32722,-32721,-32719,-32718,-32717,-32715,-32714,-32712,-32711,-32709,-32708,-32706,-32705,-32703,-32702,-32700,-32699,-32697,-32695,-32694,-32692,-32690,-32688,-32687,-32685,-32683,-32681,-32680,-32678,-32676,-32674,-32672,-32670,-32668,-32666,-32664,-32662,-32660,-32658,-32656,-32654,-32652,-32650,-32648,-32646,-32644,-32641,-32639,-32637,-32635,-32632,-32630,-32628,-32625,-32623,-32621,-32618,-32616,-32614,-32611,-32609,-32606,-32604,-32601,-32599,-32596,-32594,-32591,-32588,-32586,-32583,-32580,-32578,-32575,-32572,-32570,-32567,-32564,-32561,-32558,-32556,-32553,-32550,-32547,-32544,-32541,-32538,-32535,-32532,-32529,-32526,-32523,-32520,-32517,-32514,-32511,-32508,-32504,-32501,-32498,-32495,-32492,-32488,-32485,-32482,-32478,-32475,-32472,-32468,-32465,-32462,-32458,-32455,-32451,-32448,-32444,-32441,-32437,-32434,-32430,-32426,-32423,-32419,-32416,-32412,-32408,-32404,-32401,-32397,-32393,-32389,-32386,-32382,-32378,-32374,-32370,-32366,-32362,-32358,-32354,-32350,-32346,-32342,-32338,-32334,-32330,-32326,-32322,-32318,-32314,-32310,-32305,-32301,-32297,-32293,-32288,-32284,-32280,-32275,-32271,-32267,-32262,-32258,-32254,-32249,-32245,-32240,-32236,-32231,-32227,-32222,-32218,-32213,-32208,-32204,-32199,-32194,-32190,-32185,-32180,-32176,-32171,-32166,-32161,-32156,-32152,-32147,-32142,-32137,-32132,-32127,-32122,-32117,-32112,-32107,-32102,-32097,-32092,-32087,-32082,-32077,-32072,-32066,-32061,-32056,-32051,-32046,-32040,-32035,-32030,-32024,-32019,-32014,-32008,-32003,-31998,-31992,-31987,-31981,-31976,-31970,-31965,-31959,-31954,-31948,-31943,-31937,-31931,-31926,-31920,-31914,-31909,-31903,-31897,-31891,-31886,-31880,-31874,-31868,-31862,-31856,-31851,-31845,-31839,-31833,-31827,-31821,-31815,-31809,-31803,-31797,-31791,-31785,-31778,-31772,-31766,-31760,-31754,-31748,-31741,-31735,-31729,-31723,-31716,-31710,-31704,-31697,-31691,-31684,-31678,-31672,-31665,-31659,-31652,-31646,-31639,-31633,-31626,-31619,-31613,-31606,-31600,-31593,-31586,-31580,-31573,-31566,-31559,-31553,-31546,-31539,-31532,-31525,-31518,-31512,-31505,-31498,-31491,-31484,-31477,-31470,-31463,-31456,-31449,-31442,-31435,-31428,-31420,-31413,-31406,-31399,-31392,-31385,-31377,-31370,-31363,-31356,-31348,-31341,-31334,-31326,-31319,-31311,-31304,-31297,-31289,-31282,-31274,-31267,-31259,-31252,-31244,-31236,-31229,-31221,-31214,-31206,-31198,-31191,-31183,-31175,-31167,-31160,-31152,-31144,-31136,-31128,-31121,-31113,-31105,-31097,-31089,-31081,-31073,-31065,-31057,-31049,-31041,-31033,-31025,-31017,-31009,-31001,-30992,-30984,-30976,-30968,-30960,-30951,-30943,-30935,-30927,-30918,-30910,-30902,-30893,-30885,-30876,-30868,-30860,-30851,-30843,-30834,-30826,-30817,-30809,-30800,-30791,-30783,-30774,-30766,-30757,-30748,-30739,-30731,-30722,-30713,-30705,-30696,-30687,-30678,-30669,-30660,-30652,-30643,-30634,-30625,-30616,-30607,-30598,-30589,-30580,-30571,-30562,-30553,-30544,-30535,-30525,-30516,-30507,-30498,-30489,-30480,-30470,-30461,-30452,-30442,-30433,-30424,-30415,-30405,-30396,-30386,-30377,-30368,-30358,-30349,-30339,-30330,-30320,-30311,-30301,-30291,-30282,-30272,-30263,-30253,-30243,-30234,-30224,-30214,-30205,-30195,-30185,-30175,-30165,-30156,-30146,-30136,-30126,-30116,-30106,-30096,-30086,-30076,-30066,-30056,-30046,-30036,-30026,-30016,-30006,-29996,-29986,-29976,-29966,-29955,-29945,-29935,-29925,-29915,-29904,-29894,-29884,-29873,-29863,-29853,-29842,-29832,-29822,-29811,-29801,-29790,-29780,-29769,-29759,-29748,-29738,-29727,-29717,-29706,-29695,-29685,-29674,-29663,-29653,-29642,-29631,-29621,-29610,-29599,-29588,-29577,-29567,-29556,-29545,-29534,-29523,-29512,-29501,-29490,-29479,-29468,-29457,-29446,-29435,-29424,-29413,-29402,-29391,-29380,-29369,-29358,-29346,-29335,-29324,-29313,-29302,-29290,-29279,-29268,-29256,-29245,-29234,-29222,-29211,-29200,-29188,-29177,-29165,-29154,-29142,-29131,-29119,-29108,-29096,-29085,-29073,-29062,-29050,-29038,-29027,-29015,-29003,-28992,-28980,-28968,-28956,-28945,-28933,-28921,-28909,-28897,-28886,-28874,-28862,-28850,-28838,-28826,-28814,-28802,-28790,-28778,-28766,-28754,-28742,-28730,-28718,-28706,-28694,-28681,-28669,-28657,-28645,-28633,-28620,-28608,-28596,-28584,-28571,-28559,-28547,-28534,-28522,-28510,-28497,-28485,-28472,-28460,-28447,-28435,-28423,-28410,-28397,-28385,-28372,-28360,-28347,-28335,-28322,-28309,-28297,-28284,-28271,-28259,-28246,-28233,-28220,-28208,-28195,-28182,-28169,-28156,-28143,-28131,-28118,-28105,-28092,-28079,-28066,-28053,-28040,-28027,-28014,-28001,-27988,-27975,-27962,-27948,-27935,-27922,-27909,-27896,-27883,-27869,-27856,-27843,-27830,-27816,-27803,-27790,-27777,-27763,-27750,-27736,-27723,-27710,-27696,-27683,-27669,-27656,-27642,-27629,-27615,-27602,-27588,-27575,-27561,-27548,-27534,-27520,-27507,-27493,-27479,-27466,-27452,-27438,-27424,-27411,-27397,-27383,-27369,-27355,-27342,-27328,-27314,-27300,-27286,-27272,-27258,-27244,-27230,-27216,-27202,-27188,-27174,-27160,-27146,-27132,-27118,-27104,-27090,-27076,-27061,-27047,-27033,-27019,-27005,-26990,-26976,-26962,-26948,-26933,-26919,-26905,-26890,-26876,-26861,-26847,-26833,-26818,-26804,-26789,-26775,-26760,-26746,-26731,-26717,-26702,-26688,-26673,-26658,-26644,-26629,-26615,-26600,-26585,-26570,-26556,-26541,-26526,-26512,-26497,-26482,-26467,-26452,-26437,-26423,-26408,-26393,-26378,-26363,-26348,-26333,-26318,-26303,-26288,-26273,-26258,-26243,-26228,-26213,-26198,-26183,-26168,-26153,-26137,-26122,-26107,-26092,-26077,-26061,-26046,-26031,-26016,-26000,-25985,-25970,-25954,-25939,-25924,-25908,-25893,-25878,-25862,-25847,-25831,-25816,-25800,-25785,-25769,-25754,-25738,-25723,-25707,-25691,-25676,-25660,-25645,-25629,-25613,-25598,-25582,-25566,-25550,-25535,-25519,-25503,-25487,-25472,-25456,-25440,-25424,-25408,-25392,-25376,-25361,-25345,-25329,-25313,-25297,-25281,-25265,-25249,-25233,-25217,-25201,-25185,-25169,-25152,-25136,-25120,-25104,-25088,-25072,-25056,-25039,-25023,-25007,-24991,-24974,-24958,-24942,-24926,-24909,-24893,-24877,-24860,-24844,-24827,-24811,-24795,-24778,-24762,-24745,-24729,-24712,-24696,-24679,-24663,-24646,-24630,-24613,-24596,-24580,-24563,-24546,-24530,-24513,-24496,-24480,-24463,-24446,-24430,-24413,-24396,-24379,-24362,-24346,-24329,-24312,-24295,-24278,-24261,-24244,-24228,-24211,-24194,-24177,-24160,-24143,-24126,-24109,-24092,-24075,-24058,-24041,-24023,-24006,-23989,-23972,-23955,-23938,-23921,-23903,-23886,-23869,-23852,-23835,-23817,-23800,-23783,-23766,-23748,-23731,-23714,-23696,-23679,-23661,-23644,-23627,-23609,-23592,-23574,-23557,-23539,-23522,-23504,-23487,-23469,-23452,-23434,-23417,-23399,-23382,-23364,-23346,-23329,-23311,-23293,-23276,-23258,-23240,-23223,-23205,-23187,-23169,-23151,-23134,-23116,-23098,-23080,-23062,-23045,-23027,-23009,-22991,-22973,-22955,-22937,-22919,-22901,-22883,-22865,-22847,-22829,-22811,-22793,-22775,-22757,-22739,-22721,-22703,-22685,-22666,-22648,-22630,-22612,-22594,-22575,-22557,-22539,-22521,-22503,-22484,-22466,-22448,-22429,-22411,-22393,-22374,-22356,-22338,-22319,-22301,-22282,-22264,-22245,-22227,-22209,-22190,-22172,-22153,-22135,-22116,-22097,-22079,-22060,-22042,-22023,-22004,-21986,-21967,-21949,-21930,-21911,-21893,-21874,-21855,-21836,-21818,-21799,-21780,-21761,-21743,-21724,-21705,-21686,-21667,-21648,-21629,-21611,-21592,-21573,-21554,-21535,-21516,-21497,-21478,-21459,-21440,-21421,-21402,-21383,-21364,-21345,-21326,-21307,-21288,-21268,-21249,-21230,-21211,-21192,-21173,-21154,-21134,-21115,-21096,-21077,-21057,-21038,-21019,-21000,-20980,-20961,-20942,-20922,-20903,-20884,-20864,-20845,-20825,-20806,-20787,-20767,-20748,-20728,-20709,-20689,-20670,-20650,-20631,-20611,-20592,-20572,-20553,-20533,-20513,-20494,-20474,-20455,-20435,-20415,-20396,-20376,-20356,-20337,-20317,-20297,-20277,-20258,-20238,-20218,-20198,-20179,-20159,-20139,-20119,-20099,-20079,-20060,-20040,-20020,-20000,-19980,-19960,-19940,-19920,-19900,-19880,-19860,-19840,-19820,-19800,-19780,-19760,-19740,-19720,-19700,-19680,-19660,-19640,-19620,-19599,-19579,-19559,-19539,-19519,-19499,-19478,-19458,-19438,-19418,-19397,-19377,-19357,-19337,-19316,-19296,-19276,-19255,-19235,-19215,-19194,-19174,-19154,-19133,-19113,-19092,-19072,-19051,-19031,-19011,-18990,-18970,-18949,-18929,-18908,-18888,-18867,-18846,-18826,-18805,-18785,-18764,-18744,-18723,-18702,-18682,-18661,-18640,-18620,-18599,-18578,-18558,-18537,-18516,-18495,-18475,-18454,-18433,-18412,-18392,-18371,-18350,-18329,-18308,-18287,-18267,-18246,-18225,-18204,-18183,-18162,-18141,-18120,-18099,-18078,-18057,-18036,-18015,-17994,-17973,-17952,-17931,-17910,-17889,-17868,-17847,-17826,-17805,-17784,-17763,-17742,-17720,-17699,-17678,-17657,-17636,-17615,-17593,-17572,-17551,-17530,-17509,-17487,-17466,-17445,-17423,-17402,-17381,-17360,-17338,-17317,-17296,-17274,-17253,-17232,-17210,-17189,-17167,-17146,-17124,-17103,-17082,-17060,-17039,-17017,-16996,-16974,-16953,-16931,-16910,-16888,-16867,-16845,-16824,-16802,-16780,-16759,-16737,-16716,-16694,-16672,-16651,-16629,-16607,-16586,-16564,-16542,-16521,-16499,-16477,-16455,-16434,-16412,-16390,-16368,-16347,-16325,-16303,-16281,-16260,-16238,-16216,-16194,-16172,-16150,-16128,-16107,-16085,-16063,-16041,-16019,-15997,-15975,-15953,-15931,-15909,-15887,-15865,-15843,-15821,-15799,-15777,-15755,-15733,-15711,-15689,-15667,-15645,-15623,-15601,-15579,-15556,-15534,-15512,-15490,-15468,-15446,-15424,-15401,-15379,-15357,-15335,-15313,-15290,-15268,-15246,-15224,-15201,-15179,-15157,-15135,-15112,-15090,-15068,-15045,-15023,-15001,-14978,-14956,-14934,-14911,-14889,-14866,-14844,-14822,-14799,-14777,-14754,-14732,-14709,-14687,-14665,-14642,-14620,-14597,-14575,-14552,-14530,-14507,-14484,-14462,-14439,-14417,-14394,-14372,-14349,-14326,-14304,-14281,-14259,-14236,-14213,-14191,-14168,-14145,-14123,-14100,-14077,-14055,-14032,-14009,-13986,-13964,-13941,-13918,-13895,-13873,-13850,-13827,-13804,-13782,-13759,-13736,-13713,-13690,-13667,-13645,-13622,-13599,-13576,-13553,-13530,-13507,-13485,-13462,-13439,-13416,-13393,-13370,-13347,-13324,-13301,-13278,-13255,-13232,-13209,-13186,-13163,-13140,-13117,-13094,-13071,-13048,-13025,-13002,-12979,-12956,-12933,-12909,-12886,-12863,-12840,-12817,-12794,-12771,-12748,-12724,-12701,-12678,-12655,-12632,-12609,-12585,-12562,-12539,-12516,-12492,-12469,-12446,-12423,-12399,-12376,-12353,-12330,-12306,-12283,-12260,-12236,-12213,-12190,-12166,-12143,-12120,-12096,-12073,-12050,-12026,-12003,-11980,-11956,-11933,-11909,-11886,-11862,-11839,-11816,-11792,-11769,-11745,-11722,-11698,-11675,-11651,-11628,-11604,-11581,-11557,-11534,-11510,-11487,-11463,-11440,-11416,-11393,-11369,-11345,-11322,-11298,-11275,-11251,-11227,-11204,-11180,-11157,-11133,-11109,-11086,-11062,-11038,-11015,-10991,-10967,-10944,-10920,-10896,-10873,-10849,-10825,-10801,-10778,-10754,-10730,-10706,-10683,-10659,-10635,-10611,-10588,-10564,-10540,-10516,-10492,-10469,-10445,-10421,-10397,-10373,-10349,-10326,-10302,-10278,-10254,-10230,-10206,-10182,-10159,-10135,-10111,-10087,-10063,-10039,-10015,-9991,-9967,-9943,-9919,-9895,-9871,-9847,-9823,-9799,-9775,-9751,-9727,-9703,-9679,-9655,-9631,-9607,-9583,-9559,-9535,-9511,-9487,-9463,-9439,-9415,-9391,-9367,-9343,-9319,-9295,-9270,-9246,-9222,-9198,-9174,-9150,-9126,-9102,-9077,-9053,-9029,-9005,-8981,-8957,-8932,-8908,-8884,-8860,-8836,-8812,-8787,-8763,-8739,-8715,-8690,-8666,-8642,-8618,-8593,-8569,-8545,-8521,-8496,-8472,-8448,-8424,-8399,-8375,-8351,-8326,-8302,-8278,-8253,-8229,-8205,-8180,-8156,-8132,-8107,-8083,-8059,-8034,-8010,-7986,-7961,-7937,-7912,-7888,-7864,-7839,-7815,-7790,-7766,-7742,-7717,-7693,-7668,-7644,-7619,-7595,-7571,-7546,-7522,-7497,-7473,-7448,-7424,-7399,-7375,-7350,-7326,-7301,-7277,-7252,-7228,-7203,-7179,-7154,-7130,-7105,-7081,-7056,-7032,-7007,-6982,-6958,-6933,-6909,-6884,-6860,-6835,-6811,-6786,-6761,-6737,-6712,-6688,-6663,-6638,-6614,-6589,-6564,-6540,-6515,-6491,-6466,-6441,-6417,-6392,-6367,-6343,-6318,-6293,-6269,-6244,-6219,-6195,-6170,-6145,-6121,-6096,-6071,-6047,-6022,-5997,-5972,-5948,-5923,-5898,-5874,-5849,-5824,-5799,-5775,-5750,-5725,-5700,-5676,-5651,-5626,-5601,-5577,-5552,-5527,-5502,-5478,-5453,-5428,-5403,-5378,-5354,-5329,-5304,-5279,-5254,-5230,-5205,-5180,-5155,-5130,-5106,-5081,-5056,-5031,-5006,-4981,-4957,-4932,-4907,-4882,-4857,-4832,-4807,-4783,-4758,-4733,-4708,-4683,-4658,-4633,-4608,-4584,-4559,-4534,-4509,-4484,-4459,-4434,-4409,-4384,-4359,-4335,-4310,-4285,-4260,-4235,-4210,-4185,-4160,-4135,-4110,-4085,-4060,-4035,-4011,-3986,-3961,-3936,-3911,-3886,-3861,-3836,-3811,-3786,-3761,-3736,-3711,-3686,-3661,-3636,-3611,-3586,-3561,-3536,-3511,-3486,-3461,-3436,-3411,-3386,-3361,-3336,-3311,-3286,-3261,-3236,-3211,-3186,-3161,-3136,-3111,-3086,-3061,-3036,-3011,-2986,-2961,-2936,-2911,-2886,-2861,-2836,-2811,-2786,-2761,-2736,-2711,-2686,-2661,-2636,-2610,-2585,-2560,-2535,-2510,-2485,-2460,-2435,-2410,-2385,-2360,-2335,-2310,-2285,-2260,-2235,-2209,-2184,-2159,-2134,-2109,-2084,-2059,-2034,-2009,-1984,-1959,-1934,-1908,-1883,-1858,-1833,-1808,-1783,-1758,-1733,-1708,-1683,-1658,-1632,-1607,-1582,-1557,-1532,-1507,-1482,-1457,-1432,-1406,-1381,-1356,-1331,-1306,-1281,-1256,-1231,-1206,-1180,-1155,-1130,-1105,-1080,-1055,-1030,-1005,-980,-954,-929,-904,-879,-854,-829,-804,-779,-753,-728,-703,-678,-653,-628,-603,-578,-552,-527,-502,-477,-452,-427,-402,-376,-351,-326,-301,-276,-251,-226,-201,-175,-150,-125,-100,-75,-50,-25

};*/
const int sinetable[] ={
    16383,17989,19580,21140,22653,24107,25486,26777,27969,29049,30006,30833,31520,
    32062,32453,32689,32767,32689,32453,32062,31520,30833,30006,29049,27969,26777,
    25486,24107,22653,21140,19580,17989,16384,14778,13187,11627,10114,8660,7281,5990,
    4798,3718,2761,1934,1247,705,314,78, 0,78,314,705,1247,1934,2761,3718,4798,5990,
    7281,8660,10114,11627,13187,14778

};

void __attribute__((interrupt, no_auto_psv)) _PWMInterrupt(void){

    Phase += Delta_Phase;       // Accumulate Delta_Phase in Phase variable
    Phase_Offset1 = _0_DEGREES; // Add proper value to phase offset (0 degree)
    Multiplier = sinetable[(Phase + Phase_Offset1) >> 10]; // Take sine info

    //Multiplier = (Multiplier1 + Multiplier2) >> 1;

    asm("MOV _Multiplier, W4"); // Load first multiplier
    asm("MOV _PTPER, W5");      // Load second multiplier
    asm("MOV #_Result, W0");    // Load W0 with the address of Result
    asm("MPY W4*W5, A");        // Perform Fractional multiplication
    asm("SAC A, [W0]");         // Store multiplication result in var Result

    //PDC1 = Result + PTPER + RAMBuffer[9];
    PDC1 = Result + RAMBuffer[9] + RAMBuffer[10];

    Phase_Offset2 = _120_DEGREES;
    Multiplier = sinetable[(Phase + Phase_Offset2) >> 10]; // Take sine info
    asm("MOV _Multiplier, W4");
    asm("MOV _PTPER, W5");
    asm("MOV #_Result, W0");
    asm("MPY W4*W5, A");
    asm("SAC A, [W0]");
    //PDC2 = Result + PTPER + RAMBuffer[9] - 28;
    PDC2 = Result + RAMBuffer[9] + RAMBuffer[10];

    Phase_Offset3 = _240_DEGREES;
    Multiplier = sinetable[(Phase + Phase_Offset3) >> 10]; // Take sine info
    asm("MOV _Multiplier, W4");
    asm("MOV _PTPER, W5");
    asm("MOV #_Result, W0");
    asm("MPY W4*W5, A");
    asm("SAC A, [W0]");
    //PDC3 = Result + PTPER + RAMBuffer[9] - 28;
    PDC3 = Result + RAMBuffer[9] + RAMBuffer[10];

    IFS2bits.PWMIF = 0;

}
void __attribute__((interrupt,no_auto_psv)) _SI2CInterrupt(void){
	unsigned char Temp;	//used for dummy read

	if((I2CSTATbits.R_W == 0)&&(I2CSTATbits.D_A == 0))	//Address matched
		{
			Temp = I2CRCV;		//dummy read
			AddrFlag = 1;	//next byte will be address
		}
	else if((I2CSTATbits.R_W == 0)&&(I2CSTATbits.D_A == 1))	//check for data
		{
			if(AddrFlag)
			{
				AddrFlag = 0;
				DataFlag = 1;	//next byte is data
				RAMPtr = RAMPtr + I2CRCV;
			}
			else if(DataFlag)
			{
				*RAMPtr = (unsigned char)I2CRCV;// store data into RAM
                                AddrFlag = 0;//end of tx
				DataFlag = 0;
				RAMPtr = &RAMBuffer[0];	//reset the RAM pointer
			}
		}
	else if((I2CSTATbits.R_W == 1)&&(I2CSTATbits.D_A == 0))
	{
		Temp = I2CRCV;
		I2CTRN = *RAMPtr;	//Read data from RAM & send data to I2C master device
		I2CCONbits.SCLREL = 1;	//Release SCL1 line
		while(I2CSTATbits.TBF);//Wait till all
		RAMPtr = &RAMBuffer[0];	//reset the RAM pointer
	}
	_SI2CIF = 0;	//clear I2C1 Slave interrupt flag
}

void InitMCPWM(void){
    TRISE = 0x0100;                     // PWM pins as outputs, and FLTA as input
    //PTPER = 9;
    PTPER = (FCY/FPWM -1) >> 1;        // Compute Period for desired frequency
    OVDCON = 0x0000;                    // Disable all PWM outputs.
    DTCON1 = DEADTIME;                  // ~200 ns of dead time @ 20 MIPS and 1:1 Prescaler
    PWMCON1 = 0x0077;                   // Enable PWM output pins and enable complementary mode
    PDC1 = PTPER;                       /* 0 Volts on Phase A. This value corresponds to
                                           50% of duty cycle, which in complementary mode
                                           gives an average of 0 Volts */
    PDC2 = PTPER;                       // 0 Volts on Phase B.
    PDC3 = PTPER;                       // 0 Volts on Phase C.
    IFS2bits.PWMIF = 0;                 // Clear PWM Interrupt flag
    IEC2bits.PWMIE = 1;                 // Clear PWM Interrupt flag
    OVDCON = 0x3F00;                    // PWM outputs are controller by PWM module
    PTCONbits.PTMOD = 2;                // Center aligned PWM operation
    PTCONbits.PTEN = 1;                 // Start PWM
    return;
}
void i2c_init(void){
        LATD = 0;
        TRISD = 0b11111110;
	I2CCON = 0x8000;	//Enable I2C1 module
	I2CADD = 0x77;			// 7-bit I2C slave address must be initialised here.

	IFS1=0;
	RAMPtr = &RAMBuffer[0];	//set the RAM pointer and points to beginning of RAMBuffe
	_SI2CIE = 1;
}

int main() {

    RAMBuffer[7] = 10;
    RAMBuffer[9] = 0;
    i2c_init();
    InitMCPWM();

    //_LATC15 = 1;
    //_LATC14 = 1;
    //_LATC13 = 0;
    _LATD0 = 1;
    while(1){

        Delta_Phase = (RAMBuffer[7] * 65536 / FPWM);

    };

    return 0;
}

